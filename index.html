<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>wichat_en2b</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1><span class="image"><img src="./images/arc42-logo.png" alt="arc42"></span> wichat_en2b</h1>
<div class="details">
<span id="revnumber">version 8.2 EN,</span>
<span id="revdate">January 2023</span>
<br><span id="revremark">(based upon AsciiDoc version)</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#section-introduction-and-goals">1. Introduction and Goals</a>
<ul class="sectlevel2">
<li><a href="#_requirements_overview">1.1. Requirements Overview</a></li>
<li><a href="#_quality_goals">1.2. Quality Goals</a></li>
<li><a href="#_stakeholders">1.3. Stakeholders</a></li>
</ul>
</li>
<li><a href="#section-architecture-constraints">2. Architecture Constraints</a>
<ul class="sectlevel2">
<li><a href="#_technical_constraints">2.1. Technical Constraints</a></li>
<li><a href="#_organizational_political_constraints">2.2. Organizational &amp; Political Constraints</a></li>
<li><a href="#_conventions_guidelines">2.3. Conventions &amp; Guidelines</a></li>
</ul>
</li>
<li><a href="#section-context-and-scope">3. Context and Scope</a>
<ul class="sectlevel2">
<li><a href="#_business_context">3.1. Business Context</a></li>
<li><a href="#_technical_context">3.2. Technical Context</a></li>
</ul>
</li>
<li><a href="#section-solution-strategy">4. Solution Strategy</a>
<ul class="sectlevel2">
<li><a href="#_technology_decisions">4.1. Technology decisions</a></li>
<li><a href="#_architectural_design_decisions">4.2. Architectural design decisions</a></li>
<li><a href="#_design_patterns_applied">4.3. Design patterns applied</a></li>
<li><a href="#_decisions_trade_offs">4.4. Decisions trade-offs</a></li>
<li><a href="#_decisions_on_how_to_achieve_the_key_quality_goals">4.5. Decisions on how to achieve the key quality goals</a></li>
<li><a href="#_organizational_decisions">4.6. Organizational decisions</a></li>
</ul>
</li>
<li><a href="#section-building-block-view">5. Building Block View</a>
<ul class="sectlevel2">
<li><a href="#_whitebox_overall_system_c4_level_1">5.1. Whitebox Overall System (C4 Level 1)</a></li>
<li><a href="#_container_diagram_c4_level_2">5.2. Container Diagram (C4 Level 2)</a></li>
</ul>
</li>
<li><a href="#section-runtime-view">6. Runtime View</a>
<ul class="sectlevel2">
<li><a href="#_user_registration">6.1. User registration</a></li>
<li><a href="#_user_login">6.2. User login</a></li>
<li><a href="#_game_example">6.3. Game example</a></li>
<li><a href="#_exceptions_and_errors_scenarios">6.4. Exceptions and Errors Scenarios</a></li>
</ul>
</li>
<li><a href="#section-deployment-view">7. Deployment View</a>
<ul class="sectlevel2">
<li><a href="#_infrastructure_level_1">7.1. Infrastructure Level 1</a></li>
<li><a href="#_infrastructure_level_2">7.2. Infrastructure Level 2</a></li>
</ul>
</li>
<li><a href="#section-concepts">8. Cross-cutting Concepts</a>
<ul class="sectlevel2">
<li><a href="#_concept_1">8.1. <em>&lt;Concept 1&gt;</em></a></li>
<li><a href="#_concept_2">8.2. <em>&lt;Concept 2&gt;</em></a></li>
<li><a href="#_concept_n">8.3. <em>&lt;Concept n&gt;</em></a></li>
</ul>
</li>
<li><a href="#section-design-decisions">9. Architecture Decisions</a></li>
<li><a href="#section-quality-scenarios">10. Quality Requirements</a>
<ul class="sectlevel2">
<li><a href="#_quality_tree">10.1. Quality Tree</a></li>
<li><a href="#_quality_scenarios">10.2. Quality Scenarios</a></li>
</ul>
</li>
<li><a href="#section-technical-risks">11. Risks and Technical Debts</a></li>
<li><a href="#section-glossary">12. Glossary</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style>
.arc42help {font-size:small; width: 14px; height: 16px; overflow: hidden; position: absolute; right: 0; padding: 2px 0 3px 2px;}
.arc42help::before {content: "?";}
.arc42help:hover {width:auto; height: auto; z-index: 100; padding: 10px;}
.arc42help:hover::before {content: "";}
@media print {
	.arc42help {display:none;}
}
</style>
<div class="paragraph">
<p><strong>About arc42</strong></p>
</div>
<div class="paragraph lead">
<p>arc42, the template for documentation of software and system architecture.</p>
</div>
<div class="paragraph">
<p>Template Version 8.2 EN. (based upon AsciiDoc version), January 2023</p>
</div>
<div class="paragraph">
<p>Created, maintained and &#169; by Dr. Peter Hruschka, Dr. Gernot Starke and contributors.
See <a href="https://arc42.org" class="bare">https://arc42.org</a>.</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-introduction-and-goals">1. Introduction and Goals</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_requirements_overview">1.1. Requirements Overview</h3>
<div class="paragraph">
<p>The goal of this project is to enhance the online "Saber y Ganar" quiz show application, developed last year by ChattySw, with new features that incorporate large language models (LLMs) and Wikidata for a more interactive and engaging experience. In our case
the game with its enhancements will be made ultimately from scratch, utilizing/taking a look at some code from last year&#8217;s app for guidance/help.</p>
</div>
<div class="paragraph">
<p>The key functional requirements of the system are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A Web frontend that presents pictures with questions for the users to answer.</p>
</li>
<li>
<p>Users must be able to register, login, and view historical data related to their game performance (e.g., number of games, correct answers, time taken).</p>
</li>
<li>
<p>The system should automatically generate questions and answers using Wikidata.</p>
</li>
<li>
<p>Hints for the questions can be obtained through interaction with an external LLM via an API.</p>
</li>
<li>
<p>The LLM should mitigate the generation of incorrect answers or hallucinations when providing hints.</p>
</li>
<li>
<p>Each question will have a correct answer and multiple distractors, all generated automatically.</p>
</li>
<li>
<p>Creation of two well documented APIs for accessing user data and the question creation tool.</p>
</li>
<li>
<p>There is a possibility for users to interact with the application in different game modes, such as “Each wise man with his subject,” “Travel with us,” or “The hot question.”</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional features include internationalization, mobile version, users' ranking, multiplayer capabilities, and personalized game settings like adjusting time limits and the scope of questions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_quality_goals">1.2. Quality Goals</h3>
<div class="paragraph">
<p>The quality goals for the architecture are as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Quality Goal</th>
<th class="tableblock halign-left valign-top">Scenario</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Scalability</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must be able to handle a large number of simultaneous users without a noticeable decrease in performance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reliability</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must be robust enough to handle failures in the hint generation API and ensure the user experience is minimally impacted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usability</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The application must be intuitive and easy to use, allowing users to quickly understand how to play, answer questions, and interact with hints.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Performance</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system should provide fast responses, particularly in generating questions and hints, without delays that impact the user experience.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Security</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must ensure that user data is securely stored and accessible only to authorized users.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These quality goals will drive architectural decisions, particularly concerning how data is processed, stored, and presented to the user, as well as how external integrations (e.g., LLM API and Wikidata) are handled.</p>
</div>
</div>
<div class="sect2">
<h3 id="_stakeholders">1.3. Stakeholders</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Role/Name</th>
<th class="tableblock halign-left valign-top">Contact</th>
<th class="tableblock halign-left valign-top">Expectations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Players</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Game users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enjoyable and engaging experience, with an easy-to-use interface and fun, dynamic gameplay.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Administrators</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Admin users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Effective tools for managing game content, monitoring performance, and maintaining system integrity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>RTVE / Teachers</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTVE management / Teachers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High-quality user experience, with an emphasis on scalability, performance, and security.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Development Team</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ChattySw</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A robust, well-documented, and maintainable system. Clear requirements for integration with LLM and Wikidata, as well as a user-friendly interface.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-architecture-constraints">2. Architecture Constraints</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_technical_constraints">2.1. Technical Constraints</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Justification</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Web-Based System</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must be a web application, accessible via a browser, ensuring broad accessibility and ease of deployment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Frontend Technologies</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Web frontend must be developed to ensure a modern, responsive, and maintainable user experience.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Backend Framework</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system should include a backend aiming to support efficient API interactions and robust user management.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Database</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must use a database to store user data, game progress, and question history efficiently.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Cloud Deployment</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The application must be deployed on a cloud-based infrastructure (e.g., AWS, Azure, or Google Cloud) to ensure availability and scalability.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>External API Integration</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must integrate with Wikidata and an LLM API for question and hint generation. API rate limits and response times should be considered.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Performance Constraints</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The application must provide real-time interaction with the LLM for hints and ensure fast response times (&lt;1s for hints, &lt;3s for question generation).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_organizational_political_constraints">2.2. Organizational &amp; Political Constraints</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Justification</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Company Policies</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ChattySw must adhere to company-wide software development standards, including CI/CD pipelines and agile methodologies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Collaboration with RTVE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The project must meet RTVE’s requirements and branding guidelines, ensuring consistency with existing products.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Incremental Development</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The team of seven developers must follow an iterative development approach with regular deliverables.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Security and Privacy Compliance</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must comply with GDPR regulations, ensuring user data protection and privacy.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_conventions_guidelines">2.3. Conventions &amp; Guidelines</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Justification</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Version Control</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Git and a well-defined branching strategy (e.g., GitFlow) must be used for source code management.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Coding Standards</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The team must adhere to best coding practices, including style guides (e.g., PEP 8 for Python, Airbnb Style Guide for JavaScript).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Testing Requirements</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The project must include unit tests, integration tests, and end-to-end tests to ensure software reliability.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Documentation Standards</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All architecture decisions and API endpoints must be documented using tools like OpenAPI and Markdown.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-context-and-scope">3. Context and Scope</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_business_context">3.1. Business Context</h3>
<div class="paragraph">
<p>The system interacts with several external entities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>User</strong>: interacts with the system through a web interface.</p>
</li>
<li>
<p><strong>Wikidata</strong>: supplies data for dynamically generated quiz questions.</p>
</li>
<li>
<p><strong>LLM Service</strong>: external LLM API used for providing hints related to quiz questions.</p>
</li>
<li>
<p><strong>Database</strong>: the system interacts with a database storing user-related data.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Quiz Game System - Business Context Table</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Communication Partner</th>
<th class="tableblock halign-left valign-top">Inputs to System</th>
<th class="tableblock halign-left valign-top">Outputs from System</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Player (User)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Login credentials, answer selection and hint requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Questions, feedback, hints, scores</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>WikiData API</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query for quiz questions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response with data and images</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>LLM Service</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User questions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AI-generated hints</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Database</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Game data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Persistent data (user info, game states, scores&#8230;&#8203;)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Business Context Diagram</strong></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./images/05_system_context_diagram.png" alt="Business context diagram"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_technical_context">3.2. Technical Context</h3>
<div class="paragraph">
<p>The system is linked to several technical interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Frontend-Backend Communication</strong>: The client uses React.js to communicate with the Node.js backend through RESTful API calls.</p>
</li>
<li>
<p><strong>Backend-Database Communication</strong>: The backend of the system interacts with a database through MongoDB using Mongoose ODM.</p>
</li>
<li>
<p><strong>External APIs</strong>: Some external APIs are used for taking advantage of services such as data retrieval (WikiData) and hint generation (LLM).</p>
</li>
<li>
<p><strong>Security Considerations</strong>: User passwords are hashed using Bcrypt, and authentication is managed through a Gateway service.</p>
</li>
<li>
<p><strong>User Gateway</strong>: Handles user-related API requests, routing authentication and CRUD operations to their respective services.</p>
</li>
<li>
<p><strong>Game Service</strong>: Manages game logic and caches question batches to reduce WikiData API overhead.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Quiz Game System - Technical Context Table</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 6.6666%;">
<col style="width: 13.3333%;">
<col style="width: 20%;">
<col style="width: 26.6666%;">
<col style="width: 33.3335%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Component</strong></th>
<th class="tableblock halign-left valign-top">Technology</th>
<th class="tableblock halign-left valign-top">Communication Method</th>
<th class="tableblock halign-left valign-top">Protocol</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Frontend</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">React.js</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST API Calls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Backend</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node.js + Express</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST API Calls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Database</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mongoose (MongoDB)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Queries</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP/IP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>WikiData</strong> (via GameService)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">External API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST API, SPARQL queries</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON/XML</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>AI (via LLMService)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">External API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST API Calls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>User Gateway</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Express.js</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST API Calls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>User CRUD Service</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Express.js</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST API Calls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>User Authentication Service</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Express.js + Bcrypt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST API Calls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS (OAuth2)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Security (Bcrypt)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password Hashing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Internal Authentication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Mapping I/O to Channels</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-plantuml-md5-99ed14fd2557bd6fca73cf139b118e6c.png" alt="Diagram" width="895" height="593">
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-solution-strategy">4. Solution Strategy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section of the documentation we are covering the fundamental decisions and solution strategies of our project architecture.  These decisions were made with a strong focus on addressing the constraints defined in <a href="02_architecture_constraints.html">Section 2: Architecture Constraints</a>.</p>
</div>
<div class="sect2">
<h3 id="_technology_decisions">4.1. Technology decisions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Technology</th>
<th class="tableblock halign-left valign-top">Context</th>
<th class="tableblock halign-left valign-top">Why?</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Main language used in the project</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Due to our familiarity with developing web projects using JavaScript and its easy learning curve. Moreover, it is one of the most popular languages in web development today.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="https://nodejs.org">Node.js</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Environment for the project development</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows the execution of JavaScript at runtime and is multiplatform. It is highly compatible with our main development language and is open source.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="https://reactjs.org">React</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frontend development of our web application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Widely used in the web app industry, React facilitates efficient view development with techniques familiar to our team. Its learning curve is also relatively gentle for beginners.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="https://expressjs.com">Express</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backend/core of our web application, managing client requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Express is straightforward to understand and leverages familiar concepts like functional programming, delegate functions, and a request/response HTTP controller structure.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="https://www.groq.com">Groq API (Not yet decided)</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM service to provide the chatbot experience. Currently under evaluation with consideration for alternatives (e.g., Empathy).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Groq API is a flexible service that uses interchangeable LLM models. It allows for the underlying model to be swapped by simply changing the API URL and key. The demo project showcased efficient response times and appropriate latency, with support for up to 1,000 API calls daily.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="https://www.wikidata.org">WikiData API</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides information required for answering client questions during game interactions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Its easy-to-use API and the SPARQL query language enable the development team to handle diverse information requests efficiently. Additionally, its use is a project constraint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="https://www.npmjs.com/package/bcrypt">Bcrypt</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Module for encrypting sensitive application data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offers robust hash encryption with the ability to increase the salt parameter for improved security. Its interface meets our requirements for user-related services.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="https://getpino.io">Pino</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Module for providing a logging system</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chosen over alternatives (Winston, Log4j-node, etc.) for its fast, straightforward logging and native JSON support, which simplifies readability and parsing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="https://www.docker.com">Docker</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automates deployment using containerized services</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Docker is currently the industry standard for containerized deployments, offering excellent performance and ease of management.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><a href="https://www.oracle.com/cloud/">Oracle Cloud Infrastructure (OCI)</a></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts the application in the production stage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Selected due to our ability to obtain a free, sufficiently powerful server instance from Oracle’s infrastructure.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_architectural_design_decisions">4.2. Architectural design decisions</h3>
<div class="paragraph">
<p>The project architecture is divided in different modules and their functionalities are delimited following a Layered pattern. Therefore, taking that in mind we can classify the project as follows.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Frontend</p>
<div class="ulist">
<ul>
<li>
<p><strong>Webapp</strong><br>
Module that manages the pages shown to the client and communicates with the Gateway module via requests.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Controller</p>
<div class="ulist">
<ul>
<li>
<p><strong>GatewayService</strong><br>
Endpoint of the web application that communicates the frontend with the business logic.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Service</p>
<div class="ulist">
<ul>
<li>
<p><strong>UserGateway</strong><br>
Endpoint of user information related requests. This endpoint is used to isolate the access control to user&#8217;s information.</p>
</li>
<li>
<p><strong>UserAuthenticationService</strong><br>
Module that manages the login operation and verifies the client connection.</p>
</li>
<li>
<p><strong>UserCRUDService</strong><br>
Module that carries the CRUD operations with users with the DB. Moreover, it also manages groups of users and retrieves all user-related information.</p>
</li>
<li>
<p><strong>GameService</strong><br>
Module that carries the game logic of the application quizzes, interacts with the LLMService and with the WikiData interface.</p>
</li>
<li>
<p><strong>LLMService</strong><br>
Module that acts as an interface to communicate with the LLM provider API in a decoupled way. Allowing the application to consider future changes in the API provider with the same functionality.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Persistence</p>
<div class="ulist">
<ul>
<li>
<p><strong>MongoDB</strong><br>
Module of persistence that stores the user&#8217;s information in JSON format.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/04_architectural_design.png" alt="Architecture design">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_design_patterns_applied">4.3. Design patterns applied</h3>
<div class="paragraph">
<p>In our solution we are applying some design patterns to be aware of future changes of features in the code. Therefore, we can highlight the following patterns:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Facade</strong> (Unifier Interface)<br>
As our project will use a LLM module, we have consider the possibility that perhaps we have to change API provider suddenly for a performance or other reason. Therefore, an interface that hide the specific interface of a provider will reduce the coupling in its API.</p>
</li>
<li>
<p><strong>Strategy</strong><br>
We have considered an optional requirement that include game different modes. Therefore, a game could delegate the logic of an specific mode to an interface, a GameMode interface that is linked once the game is created.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_decisions_trade_offs">4.4. Decisions trade-offs</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Decision</th>
<th class="tableblock halign-left valign-top">Alternatives</th>
<th class="tableblock halign-left valign-top">Features rejected in the decision</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>JavaScript</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java and C#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By using JavaScript as the main language, we reject features such as pure OOP, which Java and C# provide. The development team is well-versed in these paradigms and feels more confident using them. Moreover, using a dynamically typed language instead of a statically typed one increases the risk of runtime errors and validation issues.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Node.js</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Boot and .NET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As a consequence of choosing JavaScript as the main language, we also dismiss Spring Boot as a web development framework, despite having some experience with it. Additionally, we opt against .NET technologies, which are widely used in the industry and have comprehensive, unified documentation provided by Microsoft.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>React</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thymeleaf and JSP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By using React, we reject HTML template engines such as Thymeleaf and JSP (which are more common in Java environments), despite having some familiarity with them.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Express</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Boot or JEE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By choosing Express, we dismiss the use of Spring Boot or JEE libraries for implementing web event controllers, along with their annotation-based approach, which simplifies application logic and functionality distribution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Groq API</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empathy LLM, Gemini LLM, and Deepseek LLM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By using only the Meta API, we miss the opportunity to participate in the Empathy challenge. Additionally, rejecting Google&#8217;s Gemini LLM and Deepseek LLM may reduce chatbot performance, as these models are evolving faster than Meta&#8217;s.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>WikiData API</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This was a project constraint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Bcrypt</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Crypto (Built-in Node.js)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The built-in Node.js Crypto module reduces external dependencies. However, it provides a more generic and basic interface, which may simplify implementation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Pino</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Winston</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By rejecting Winston, we lose its flexibility in supporting multiple log formats and advanced configuration options.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Docker</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Podman and Kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By using Docker instead of Podman, we reject Podman&#8217;s decentralized daemon architecture, which enhances deployment security. Additionally, Podman consumes fewer resources by running each container as an independent process. Furthermore, by choosing Docker, we dismiss Kubernetes' superior performance in deploying high-availability and scalable applications.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Oracle Cloud Infrastructure</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Microsoft Azure, Amazon Web Services (AWS)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By choosing Oracle Cloud Infrastructure as our deployment platform, we opt against Azure, which provides student licenses but may have higher costs for long-term use. Additionally, we reject AWS, which offers better scalability and a more flexible pricing.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_decisions_on_how_to_achieve_the_key_quality_goals">4.5. Decisions on how to achieve the key quality goals</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Quality Goal</th>
<th class="tableblock halign-left valign-top">Strategy</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Scalability</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Using Gherkin with tools to test the performance and behaviour of the application in users load scenarios. The tool used to test the user load is yet to decide, perhaps K6 or a Python script.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reliability</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The development team will apply a TDD (Test-Driven Development) to ensure that the business model behaves correctly. Besides, with an automatized Continuous Deployment strategy, the development team can deploy the project often and explore the application behaviour, considering that the logger system implemented will catch each bug occurred during the execution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usability</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Our development will follow good desing practices such as implementing i18n technology to allow internationalization, respecting the W3C standards in web design where possible and</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Performance</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Using different modules specialized in monitoring the application, as Prometheus and Grafana. Besides, to identify possible bottlenecks in our application we are using Node profiling tools as <code>node --prof</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Security</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Our application is using encrypting modules in the registry of new users and their authentification. Moreover, we have centralized the access to the application backend in a gateway service, hiding the endpoints of the application to the ones we decided.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_organizational_decisions">4.6. Organizational decisions</h3>
<div class="paragraph">
<p>To ensure an efficient and structured development process, we have established the following organizational strategies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Version Control and Collaboration</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We have adopted a <strong>Trunk-Based Development</strong> approach using <strong>Git</strong>, where <strong>each branch</strong> is dedicated to completing a <strong>specific issue</strong>. Merging changes into the main (trunk) branch <strong>requires a pull request</strong> that must be reviewed and approved by at least one other team member. This ensures code quality, reduces integration issues, and reinforces team collaboration, preventing over-specialization.</p>
</div>
<div class="paragraph">
<p>Additionally, <strong>issues could be handled by multiple team members</strong>, using the GitHub <strong>Discussions</strong> section, promoting team problem-solving and reducing bottlenecks. Moreover, during <strong>team meetings</strong> we must <strong>review each developer issues progress</strong> to <strong>identify potential difficulties</strong> and provide support, whether by offering new perspectives, detecting bugs, or adding new unit tests cases.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Project Management and Workflow</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We use <strong>GitHub</strong> as our <strong>primary version control tool</strong>, and also using its <strong>integrated Kanban board</strong> to <strong>track progress</strong> (Projects section in GitHub). Issues are categorized and can transition through the following states:</p>
</div>
<div class="openblock">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No Status</p>
</li>
<li>
<p>TODO</p>
</li>
<li>
<p>In Progress</p>
</li>
<li>
<p>Testing</p>
</li>
<li>
<p>Done</p>
</li>
</ol>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Continuous Deployment and Stability Checks</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once the application reaches a deployment stable functionality, we will <strong>implement a Continuous Deployment methodology</strong>. This involves <strong>deploying</strong> the application <strong>at least once per week, to verify stability in a production-like environment</strong>. This proactive approach helps <strong>detect</strong> and resolve <strong>deployment-specific bugs early</strong>, preventing major issues from being discovered too late in the process.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-building-block-view">5. Building Block View</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_whitebox_overall_system_c4_level_1">5.1. Whitebox Overall System (C4 Level 1)</h3>
<div class="sect3">
<h4 id="_overview_diagram">5.1.1. Overview Diagram</h4>
<div class="paragraph">
<p>Business context diagram</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/diag-plantuml-md5-9ea75ac55f307c962435cf2901f524aa.png" alt="Diagram" width="538" height="197">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_motivation">5.1.2. Motivation</h4>
<div class="paragraph">
<p>The <strong>Whitebox Overall System</strong> diagram provides a high-level representation of the primary components and their interactions within the application, alongside the external systems it integrates with. This diagram is crucial for understanding the foundational architecture of the platform, showcasing the flow of data, system responsibilities, and external dependencies. It emphasizes the relationships between the various building blocks, such as the interaction between the user and the system, and how dynamic content is sourced via external APIs.</p>
</div>
<div class="paragraph">
<p>This diagram is pivotal in illustrating system interaction patterns, including user engagement with the platform and the external API interfaces used for content generation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_contained_building_blocks">5.1.3. Contained Building Blocks</h4>
<div class="paragraph">
<p>The key building blocks forming the overall system architecture include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>User</strong>: Represents the end-user of the platform, who is required to authenticate in order to access the game functionality. Once authenticated, users can interact with the system and participate in gameplay.</p>
</li>
<li>
<p><strong>Wichat EN2B Application</strong>: The core application responsible for managing game mechanics, including the generation of questions and content. It encapsulates the application’s game logic and drives the user experience. Detailed breakdowns of its internal components are explored further in later sections.</p>
</li>
<li>
<p><strong>WikiData API</strong>: A third-party API providing structured knowledge, essential for the dynamic generation of trivia questions and content. The system queries the WikiData API for real-time data, which is used to populate game questions.</p>
</li>
<li>
<p><strong>LLM API</strong>: Another third-party API used for providing hints in response to user queries. It leverages large language models (such as GPT-based systems) to dynamically generate contextual content for enhancing user interactions. <strong>Communication with the LLM occurs in a conversational manner</strong>, where each request includes the entire conversation history (i.e., a list of all previous messages) to ensure context and continuity across interactions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_important_interfaces">5.1.4. Important Interfaces</h4>
<div class="paragraph">
<p>The <strong>Important Interfaces</strong> section defines the key interactions between system components and explains the methods through which the business requirements are met.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>User to System Interaction</strong>: Users engage with the system via a <strong>web client</strong> interface, which provides a rich UI experience with interactive elements such as forms, buttons, and dynamic feedback mechanisms. This client ensures a seamless user experience throughout the gameplay.</p>
</li>
<li>
<p><strong>System to WikiData API Interaction</strong>: The Wichat EN2B application interfaces with the <strong>WikiData API</strong> using a <strong>question generator module</strong>. This module sends HTTP requests containing <strong>SPARQL queries</strong> to retrieve structured knowledge from WikiData, which is subsequently processed and used to generate game questions.</p>
</li>
<li>
<p><strong>System to LLM API Interaction</strong>: The Wichat EN2B application communicates with the <strong>LLM API</strong> by passing the entire chat history of the logged-in user in each request. This ensures that the language model has full context of the ongoing conversation, enabling the generation of hints and responses that are contextually relevant and consistent with previous exchanges.</p>
</li>
<li>
<p><strong>Internal Services Communication</strong>: Internal services within the Wichat EN2B application communicate over <strong>RESTful APIs</strong>. For example, the <strong>Gateway Service</strong> routes incoming requests to the appropriate internal services, while the <strong>Game Service</strong> ensures game state management and flow control.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_container_diagram_c4_level_2">5.2. Container Diagram (C4 Level 2)</h3>
<div class="sect3">
<h4 id="_container_diagram">5.2.1. Container Diagram</h4>
<div class="imageblock">
<div class="content">
<img src="./images/diag-plantuml-md5-a0419155f4f0b172791e6452a369862d.png" alt="Diagram" width="1619" height="516">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_motivation_2">5.2.2. Motivation</h4>
<div class="paragraph">
<p>The <strong>Container Diagram</strong> offers a more granular view of the Wichat EN2B application’s architecture, illustrating how the application is organized into discrete containers (services) and the relationships between them. This diagram is instrumental in detailing the internal structure of the system and clarifying how the platform&#8217;s various components work together to deliver its functionality.</p>
</div>
<div class="paragraph">
<p>It serves as an essential tool for understanding how user interactions are processed, how game logic is managed, and how both external and internal data sources are leveraged for seamless gameplay.</p>
</div>
</div>
<div class="sect3">
<h4 id="_contained_building_blocks_2">5.2.3. Contained Building Blocks</h4>
<div class="paragraph">
<p>The following containers represent the primary services within the Wichat EN2B application, each with distinct responsibilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Web Application</strong>: The front-end interface between the user and the system. This container is responsible for rendering the user interface (UI) and handling user interactions. Developed using <strong>React</strong>, the Web Application ensures a responsive and dynamic experience. It communicates with internal services via API calls.</p>
</li>
<li>
<p><strong>Gateway Service</strong>: Serves as the entry point for external API requests. This container is responsible for routing incoming requests to the correct internal services, ensuring that requests are handled efficiently and securely.</p>
</li>
<li>
<p><strong>Game Service</strong>: This service manages the core game logic, including the flow of the game, the presentation of questions, tracking of user progress, and determining the game&#8217;s end. It also handles the game state, such as the user&#8217;s score and question set.</p>
</li>
<li>
<p><strong>LLM Service</strong>: This container interfaces with a <strong>Large Language Model (LLM)</strong> to provide hints, explanations, and additional content to assist the user during the game. It ensures that users receive context-sensitive content, enhancing the overall gaming experience by offering real-time dynamic information. Communication with the LLM API is conducted conversationally by passing the entire message history in each request to maintain context and coherence.</p>
</li>
<li>
<p><strong>MongoDB Database</strong>: The database responsible for storing persistent system data, including user profiles, game states, and scores. MongoDB is used for its flexibility in handling semi-structured data and its scalability.</p>
</li>
<li>
<p><strong>User Gateway</strong>: A container dedicated to managing user-specific API requests. It handles user authentication, session management, and retrieval of user-related data, ensuring secure and personalized experiences.</p>
</li>
<li>
<p><strong>User Authentication Service</strong>: Manages user authentication processes, validating user credentials and ensuring secure access to the platform. It integrates with third-party authentication mechanisms when required.</p>
</li>
<li>
<p><strong>User CRUD Service</strong>: Manages the <strong>Create, Read, Update, Delete (CRUD)</strong> operations for user data. It ensures that user profiles can be created, updated, or deleted, facilitating efficient user management.</p>
</li>
<li>
<p><strong>WikiData API</strong>: A third-party external API that provides structured data for generating trivia questions and content. The Wichat EN2B application communicates with WikiData to fetch real-time data using SPARQL queries.</p>
</li>
<li>
<p><strong>LLM</strong>: This container represents the external <strong>Large Language Model</strong> service that dynamically generates content such as hints and contextual information based on user interactions. It interacts with an advanced language model, such as GPT or similar technologies, to offer real-time, personalized content.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_external_communication">5.2.4. External Communication</h4>
<div class="ulist">
<ul>
<li>
<p><strong>External API Integration</strong>: The <strong>WikiData API</strong> is a critical external system that provides the data needed to generate game questions. The Wichat EN2B application sends HTTP requests to this API, utilizing SPARQL queries to retrieve relevant content based on predefined game rules.</p>
</li>
<li>
<p><strong>LLM Communication</strong>: The <strong>LLM Service</strong> facilitates interaction with external language models. It generates contextual hints, descriptions, and other textual content dynamically, based on the user’s queries or the state of the game, to guide users through the experience. Communication with the LLM is conversational, where the system passes the entire list of prior messages for each new request to maintain consistency and relevance in responses.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_data_flow">5.2.5. Data Flow</h4>
<div class="paragraph">
<p>Data flows between containers in a manner that ensures efficient communication and process execution. For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When a user logs in via the Web Application, the system authenticates the request using the <strong>User Authentication Service</strong>.</p>
</li>
<li>
<p>After successful authentication, the user interacts with the Game Service, which may request data from the WikiData API to generate a question.</p>
</li>
<li>
<p>The <strong>LLM Service</strong> is called when the user requests a hint, and the entire conversation history is sent to the LLM API in each request to provide context-sensitive guidance and responses.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This modular design enhances scalability, maintainability, and fault isolation, ensuring that each component is specialized in its task while working seamlessly as part of the larger system.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-runtime-view">6. Runtime View</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section focuses on describing the behaviour and interactions of the system&#8217;s building blocks in form of scenarios.</p>
</div>
<div class="sect2">
<h3 id="_user_registration">6.1. User registration</h3>
<div class="paragraph">
<p>Users must create an account if they do not have one. The behaviour of the application is:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Register%20diagram.png" alt="Register diagram" width="828" height="853">
</div>
</div>
<div class="paragraph">
<p>The errorless behaviour will be:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The new user types the required information to create an account.</p>
</li>
<li>
<p>Them, AddUser.js (from package webapp) collects this information and sends it via post to the "/addUser" url.</p>
</li>
<li>
<p>The Gateway Service will answer to this petition by forwarding the petition to the User Service and saving the user data to the response (if any error happened, it would be saved here).</p>
</li>
<li>
<p>The User Service then verifies that all the necessary credentials are stored in the request.</p>
</li>
<li>
<p>It encrypts the password and creates a new User object with the username and the encrypted password.</p>
</li>
<li>
<p>This new user is then saved into the database.</p>
</li>
<li>
<p>And sent back as the response.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_user_login">6.2. User login</h3>
<div class="paragraph">
<p>Users must have an account to use the application. The following sequence diagram shows how the application behaves when logging in.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Login%20diagram.png" alt="Login diagram" width="777" height="890">
</div>
</div>
<div class="paragraph">
<p>This is the behaviour of the flawless execution of the login:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The user types an username and a password.</p>
</li>
<li>
<p>Then the Login.js (from the webapp package) collects this data and sends it via post to the "/login".</p>
</li>
<li>
<p>In the gateway service, a function answers to this request: forwards the petition to the User Authentication Service and saves the user data to the res, or when an error occurs, the error is saved to that variable.</p>
</li>
<li>
<p>After that, the User Authentication Service checks and validates the given data, and asks the database to find the user for the given username.</p>
</li>
<li>
<p>The database returns the user.</p>
</li>
<li>
<p>The User Authentication Service verifies that the encrypted password given by the user and the encrypted password stored in the database match. If this happens, a JWT Token is generated and saved to the response.</p>
</li>
<li>
<p>Shows visual confirmation of the login.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_game_example">6.3. Game example</h3>
<div class="paragraph">
<p>Here is the sequence diagram when playing the game.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Game%20diagram.png" alt="Game diagram" width="1258" height="1117">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The application requests the questions to show the user.</p>
</li>
<li>
<p>Gateway Service answers this request and forwards the petition to the Game Service.</p>
</li>
<li>
<p>Game Service then asks the WikiData API for questions.</p>
</li>
<li>
<p>The API returns the list of questions with answers in a .json file.</p>
</li>
<li>
<p>Game Service recieves these questions and forwards the data to the Gateway Service.</p>
</li>
<li>
<p>Then, the Gateway Service forwards them to the application which shows them to the user one by one.</p>
</li>
<li>
<p>When the game finishes, the app then requests to save the game results.</p>
</li>
<li>
<p>This request is answered and then forwarded by the Gateway Service and then, Game Service.</p>
</li>
<li>
<p>Game Service parses the game information to a valid format so it can be saved to de database.</p>
</li>
<li>
<p>Then this version of the game is sent back to the Game Service to be forwarded to the User Service. This is to reduce workload of the Game Service.</p>
</li>
<li>
<p>The User Service asks the User CRUD Service to save the game.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>In the case user asks for hints:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The player types a question for the LLM.</p>
</li>
<li>
<p>The application collects the prompt and forwards it to Gateway Service.</p>
</li>
<li>
<p>The aforementioned service then forwards it to the Game Service which then sends it to the LLM Service.</p>
</li>
<li>
<p>This service then validates the fields making sure the needed information needed is passed in the request and then sends the question to the LLM.</p>
</li>
<li>
<p>The LLM makes the answer and returns it to the LLM Service.</p>
</li>
<li>
<p>After that, the LLM Service parses the answer to json and sends it as the response of the petition.</p>
</li>
<li>
<p>The Game Service recieves it and forwards it to the Gateway Service and then to the Application, which shows the generated answer to the user.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_exceptions_and_errors_scenarios">6.4. Exceptions and Errors Scenarios</h3>
<div class="paragraph">
<p>Possible errors regarding:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Registering:</p>
<div class="ulist">
<ul>
<li>
<p>Invalid credentials (empty / blank).</p>
</li>
<li>
<p>Using credentials from an already existing user: usernames must be different.</p>
</li>
<li>
<p>Database exception: connection lost, data loss.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Login:</p>
<div class="ulist">
<ul>
<li>
<p>Empty or blank credentials.</p>
</li>
<li>
<p>Username does not exist.</p>
</li>
<li>
<p>Wrong password.</p>
</li>
<li>
<p>Database exception: connection lost, data loss.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Game:</p>
<div class="ulist">
<ul>
<li>
<p>Wikidata error.</p>
</li>
<li>
<p>Database exception: connection lost, data loss.</p>
</li>
<li>
<p>LLM not answering to the user&#8217;s prompt.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-deployment-view">7. Deployment View</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_infrastructure_level_1">7.1. Infrastructure Level 1</h3>
<div class="paragraph">
<p>The application will be deployed on an oracle server, using docker to run the different modules of the application. The application will use the wikidata API to get the different questions and answers of the game and an LLM API to do calls to the llm so that the user can interact with it and, for example ask for hints.</p>
</div>
<div class="paragraph">
<p>All of this will be deployed in an oracle server running ubuntu with the help of docker.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/UML%20diagram%201.png" alt="UML diagram 1" width="423" height="318">
</div>
</div>
<div class="paragraph">
<p><strong>Motivation</strong></p>
</div>
<div class="paragraph">
<p>The motivation behind the design of this application is to create a scalable, flexible, and secure system that can efficiently integrate with external APIs (such as Wikidata), while providing seamless user interactions through a web application. The core of the system revolves around managing various API calls, handling data storage, and ensuring a robust system that can keep up with the user demands.</p>
</div>
<div class="paragraph">
<p>To achieve this, we utilize a containerized microservices architecture, where each service (such as the Game Service, User Management, and API Gateway) is isolated in its own container. This separation allows for efficient scaling, improved fault tolerance, and the ability to update individual services independently. Additionally, the use of MongoDB ensures flexible, high-performance storage, while the API Gateway acts as a single entry point for all external and internal communication, providing load balancing, routing, and security functionalities.</p>
</div>
<div class="paragraph">
<p>The overall design enables the application to handle varying levels of demand, from individual user interactions to large-scale data processing, all while maintaining a high degree of security and performance. This approach not only supports future growth but also ensures that the system is easy to maintain and evolve over time.</p>
</div>
</div>
<div class="sect2">
<h3 id="_infrastructure_level_2">7.2. Infrastructure Level 2</h3>
<div class="sect3">
<h4 id="_oracle_serverapplication">7.2.1. Oracle ServerApplication</h4>
<div class="imageblock">
<div class="content">
<img src="./images/UML%20diagram%202.png" alt="UML diagram 2" width="1137" height="315">
</div>
</div>
<div class="paragraph">
<p><strong>Quality and/or Performance Features</strong></p>
</div>
<div class="paragraph">
<p>Our system consists of several key containers that work together to ensure a smooth and scalable user experience. Below are the core features and quality attributes that define the system&#8217;s architecture:</p>
</div>
<div class="paragraph">
<p><strong>Key Features</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Web Application</strong>: The web app serves as the user interface where users interact with the system. It connects to the Gateway Service to make API calls and process user actions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Endpoints</p>
</div>
<div class="literalblock">
<div class="content">
<pre>`GET /signup` - Shows the signup screen to the user</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`POST /signup` - Sends the sign up information to the gateway service</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`GET /login` - Shows the signup screen to the user</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`POST /login` - Sends the sign up information to the gateway service</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`GET /quiz` - Shows the user a question from a quiz whose theme is specified as parameter</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`POST /quiz` - Submits the answer to the gateway service</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`GET /edit`- Shows the user a form in order to edit their data</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`POST /edit` - Sends the updated information to the gateway service</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`GET /stats` - Shows the user their game stats</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Gateway Service</strong>: The central point for routing all incoming requests. It ensures security, authentication, and routing to the appropriate service, whether it&#8217;s the LLM Service, User-related services, or the Game Service.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Endpoints</p>
</div>
<div class="literalblock">
<div class="content">
<pre>`GET /health` - Shows health status of the system</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`GET /quiz` - Retrieves quiz questions</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`POST /quiz` - Submits user answers</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`POST /login` - Authenticates user requests</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`POST /adduser` - Registers new users</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`POST /edituser` - Edits user information</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`GET /stats` - Requests a user historical playing data</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`POST /askllm` - Sends a question to the LLM Service</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>LLM Service</strong>: A container dedicated to handling calls to the LLM API for processing user queries.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Endpoints</p>
</div>
<div class="literalblock">
<div class="content">
<pre>`POST /hint` - Provides a hint to the player</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>User Gateway</strong>: Manages user-related API calls, including user authentication and CRUD operations.</p>
</li>
<li>
<p><strong>User CRUD Service</strong>: Handles the CRUD operations for user data, interacting with the MongoDB database for persistent storage.</p>
</li>
<li>
<p><strong>User Authentication Service</strong>: Responsible for managing user authentication, ensuring that secure access to the application is maintained.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Endpoints</p>
</div>
<div class="literalblock">
<div class="content">
<pre>`GET /users` - Retrieves a list of all users (admin use)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`POST /users/search` - Searches for users based on filters (e.g., username, email)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Game Service</strong>: Manages the game-related API calls, processing user inputs and interacting with external services like the Wikidata API to answer game-related questions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Endpoints</p>
</div>
<div class="literalblock">
<div class="content">
<pre>`GET /quiz` - Retrieves a batch of quiz questions from WikiData</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`POST /quiz` - Validates a user's answer</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>MongoDB Database</strong>: Stores user data, including authentication and CRUD-related data, and ensures data integrity and persistence.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By organizing the system into these clear, well-defined containers, we ensure that each component can evolve independently, maintain security, and scale as required while providing a robust user experience.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-concepts">8. Cross-cutting Concepts</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Content</div>
<p>This section describes overall, principal regulations and solution ideas that are relevant in multiple parts (= cross-cutting) of your system.
Such concepts are often related to multiple building blocks.
They can include many different topics, such as</p>
</div>
<div class="ulist">
<ul>
<li>
<p>models, especially domain models</p>
</li>
<li>
<p>architecture or design patterns</p>
</li>
<li>
<p>rules for using specific technology</p>
</li>
<li>
<p>principal, often technical decisions of an overarching (= cross-cutting) nature</p>
</li>
<li>
<p>implementation rules</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Concepts form the basis for <em>conceptual integrity</em> (consistency, homogeneity) of the architecture.
Thus, they are an important contribution to achieve inner qualities of your system.</p>
</div>
<div class="paragraph">
<p>Some of these concepts cannot be assigned to individual building blocks, e.g. security or safety.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>The form can be varied:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>concept papers with any kind of structure</p>
</li>
<li>
<p>cross-cutting model excerpts or scenarios using notations of the architecture views</p>
</li>
<li>
<p>sample implementations, especially for technical concepts</p>
</li>
<li>
<p>reference to typical usage of standard frameworks (e.g. using Hibernate for object/relational mapping)</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Structure</div>
<p>A potential (but not mandatory) structure for this section could be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Domain concepts</p>
</li>
<li>
<p>User Experience concepts (UX)</p>
</li>
<li>
<p>Safety and security concepts</p>
</li>
<li>
<p>Architecture and design patterns</p>
</li>
<li>
<p>"Under-the-hood"</p>
</li>
<li>
<p>development concepts</p>
</li>
<li>
<p>operational concepts</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note: it might be difficult to assign individual concepts to one specific topic
on this list.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/08-concepts-EN.drawio.png" alt="Possible topics for crosscutting concepts">
</div>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-8/">Concepts</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_concept_1">8.1. <em>&lt;Concept 1&gt;</em></h3>
<div class="paragraph">
<p><em>&lt;explanation&gt;</em></p>
</div>
</div>
<div class="sect2">
<h3 id="_concept_2">8.2. <em>&lt;Concept 2&gt;</em></h3>
<div class="paragraph">
<p><em>&lt;explanation&gt;</em></p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_concept_n">8.3. <em>&lt;Concept n&gt;</em></h3>
<div class="paragraph">
<p><em>&lt;explanation&gt;</em></p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-design-decisions">9. Architecture Decisions</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Important, expensive, large scale or risky architecture decisions including rationales.
With "decisions" we mean selecting one alternative based on given criteria.</p>
</div>
<div class="paragraph">
<p>Please use your judgement to decide whether an architectural decision should be documented
here in this central section or whether you better document it locally
(e.g. within the white box template of one building block).</p>
</div>
<div class="paragraph">
<p>Avoid redundancy.
Refer to section 4, where you already captured the most important decisions of your architecture.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Stakeholders of your system should be able to comprehend and retrace your decisions.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Various options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ADR (<a href="https://cognitect.com/blog/2011/11/15/documenting-architecture-decisions">Documenting Architecture Decisions</a>) for every important decision</p>
</li>
<li>
<p>List or table, ordered by importance and consequences or:</p>
</li>
<li>
<p>more detailed in form of separate sections per decision</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-9/">Architecture Decisions</a> in the arc42 documentation.
There you will find links and examples about ADR.</p>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-quality-scenarios">10. Quality Requirements</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Content</div>
<p>This section contains all quality requirements as quality tree with scenarios. The most important ones have already been described in section 1.2. (quality goals)</p>
</div>
<div class="paragraph">
<p>Here you can also capture quality requirements with lesser priority,
which will not create high risks when they are not fully achieved.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Since quality requirements will have a lot of influence on architectural
decisions you should know for every stakeholder what is really important to them,
concrete and measurable.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-10/">Quality Requirements</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quality_tree">10.1. Quality Tree</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Content</div>
<p>The quality tree (as defined in ATAM – Architecture Tradeoff Analysis Method) with quality/evaluation scenarios as leafs.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>The tree structure with priorities provides an overview for a sometimes large number of quality requirements.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>The quality tree is a high-level overview of the quality goals and requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>tree-like refinement of the term "quality". Use "quality" or "usefulness" as a root</p>
</li>
<li>
<p>a mind map with quality categories as main branches</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In any case the tree should include links to the scenarios of the following section.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quality_scenarios">10.2. Quality Scenarios</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Concretization of (sometimes vague or implicit) quality requirements using (quality) scenarios.</p>
</div>
<div class="paragraph">
<p>These scenarios describe what should happen when a stimulus arrives at the system.</p>
</div>
<div class="paragraph">
<p>For architects, two kinds of scenarios are important:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Usage scenarios (also called application scenarios or use case scenarios) describe the system’s runtime reaction to a certain stimulus. This also includes scenarios that describe the system’s efficiency or performance. Example: The system reacts to a user’s request within one second.</p>
</li>
<li>
<p>Change scenarios describe a modification of the system or of its immediate environment. Example: Additional functionality is implemented or requirements for a quality attribute change.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Scenarios make quality requirements concrete and allow to
more easily measure or decide whether they are fulfilled.</p>
</div>
<div class="paragraph">
<p>Especially when you want to assess your architecture using methods like
ATAM you need to describe your quality goals (from section 1.2)
more precisely down to a level of scenarios that can be discussed and evaluated.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Tabular or free form text.</p>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-technical-risks">11. Risks and Technical Debts</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>A list of identified technical risks or technical debts, ordered by priority</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>“Risk management is project management for grown-ups” (Tim Lister, Atlantic Systems Guild.)</p>
</div>
<div class="paragraph">
<p>This should be your motto for systematic detection and evaluation of risks and technical debts in the architecture, which will be needed by management stakeholders (e.g. project managers, product owners) as part of the overall risk analysis and measurement planning.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>List of risks and/or technical debts, probably including suggested measures to minimize, mitigate or avoid risks or reduce technical debts.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-11/">Risks and Technical Debt</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-glossary">12. Glossary</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>The most important domain and technical terms that your stakeholders use when discussing the system.</p>
</div>
<div class="paragraph">
<p>You can also see the glossary as source for translations if you work in multi-language teams.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>You should clearly define your terms, so that all stakeholders</p>
</div>
<div class="ulist">
<ul>
<li>
<p>have an identical understanding of these terms</p>
</li>
<li>
<p>do not use synonyms and homonyms</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>A table with columns &lt;Term&gt; and &lt;Definition&gt;.</p>
</div>
<div class="paragraph">
<p>Potentially more columns in case you need translations.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-12/">Glossary</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;Term-1&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;definition-1&gt;</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;Term-2&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;definition-2&gt;</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 8.2 EN<br>
Last updated 2025-02-22 14:31:55 +0100
</div>
</div>
</body>
</html>